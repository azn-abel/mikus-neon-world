<!DOCTYPE html>
<html lang="jp">
    <head>
        <title>Magical Mirai 2023</title>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Shippori+Mincho+B1:wght@500&amp;display=swap">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=DotGothic16">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Wix+Madefor+Text&display=swap">
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Kosugi+Maru">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/regular.min.css">
        <link rel="stylesheet" href="./style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="UTF-8">
        <script async src="https://unpkg.com/es-module-shims@1.6.3/dist/es-module-shims.js"></script>

        <script type="importmap">
          {
            "imports": {
              "three": "https://unpkg.com/three@0.152.2/build/three.module.js",
              "three/addons/": "https://unpkg.com/three@0.152.2/examples/jsm/"
            }
          }
        </script>        <!-- <script src="https://api.songle.jp/v2/api.js"></script> -->
    </head>
    <body>
        <canvas id="bg"></canvas>

        <!-- Load an icon library to show a hamburger menu (bars) on small screens -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

        <!-- Top Navigation Menu -->
        <div class="topnav">
          <!-- 再生コントロール / Playback control -->
          <div id="control" class="far">
            <a href="#" id="play" class="disabled">&#xf144;</a>
            <a href="#" id="stop" class="disabled">&#xf28d;</a>
          </div>
          
          <div id="settings" class="far">
            <a id="settei" class="disabled" onclick="openForm()">&#xf185;</a>
          </div>
          <!-- アーティストと楽曲の情報 / Artist and song info -->
          <div id="meta">
            <div id="artist">artist: <span>-</span></div>
            <div id="song">song: <span>-</span></div>
          </div>
          
          <!-- "Hamburger menu" / "Bar icon" to toggle the navigation links -->
          <a class="icon" id="burger-menu" onclick="burgerClick()">
            <i class="fa fa-bars"></i>
          </a>
        </div>

        <!-- Language options button -->
        <button class="language-button" id="language-button" onclick="switchLanguage()">日本語</button>

        <!-- Navigation links (hidden by default) -->
        <div id="myLinks">
            <button id="kingJack" class="selection" value=0 onclick="changeSong(value)">king ki jack yaku</button>
            <button id="toLive" class="selection" value=1 onclick="changeSong(value)">To live</button>
            <button id="shoumeisha" class="selection" value=2 onclick="changeSong(value)">shoumeisha</button>
            <button id="neonLights" class="selection" value=3 onclick="changeSong(value)">Going through a sea of Neon lights</button>
            <button id="mutation" class="selection" value=4 onclick="changeSong(value)">Mutation</button>
            <button id="Entrust" class="selection" value=5 onclick="changeSong(value)">Entrust via 39</button>
        </div>

        <div class="window-container">
          <!-- The form -->
          <div class="form-popup" id="myForm">
            <!-- <form action="/action_page.php" class="form-container"> -->
            <h1 id="settings-header">Settings</h1>
            <div class="menu-items">
              <div class="item">
                <p id="expression-header" for="expression">Expression</p>
                <select name="expression container" id="expression">
                  <option id="smile" value="smile">Smile</option>
                  <option id="frown" value="frown">Frown</option>
                  <option id="angry" value="angry">Angry</option>
                  <option id="shy" value="shy">Shy</option>
                </select>
              </div>
              <div class="item">
                <p id="visual-header" for="visual">Visual Effects</p>
                <select name="visual container" id="visual">
                  <option id="low" value="low">Low</option>
                  <option id="medium" value="medium">Medium</option>
                  <option id="high" value="high">High</option>
                </select>
              </div>
              <div class="item">
                <p id="animation-header" for="animation">Animation</p>
                <select name="animation container" id="animation">
                  <option id="mouth" value="mouth">Mouth</option>
                  <option id="speakers" value="speakers">Speakers</option>
                  <option id="both" value="both">Both</option>
                </select>
              </div>
              <div class="item">
                <p id="beatbar-header">Beatbar Color</p>
                <div class="beatbar container">
                  <input type="color" id="bar-color1" value="#ff0000">
                  <input type="color" id="bar-color2" value="#00ffff">
                </div>
              </div>
              <div class="item">
                <p id="lyrics-header">Lyrics Color</p>
                <div class="text container">
                  <input type="color" id="color-picker" value="#fddaff">
                </div>
              </div>
            </div>
              <button type="button" class="btn cancel" onclick="closeForm()">OK</button>

            <!-- </form> -->
          </div>
        </div>
        <!-- オーバーレイ / Overlay -->
        <div id="popup-overlay"></div>
        
        <!-- オーバーレイ / Overlay -->
        <div id="overlay">
          <p id="overlay-text">Loading Player</p>
          <div id="loader" class="lds-roller"><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div>
        </div>

        <!-- 音源 / Audio souce -->
        <div id="media"></div>

        <!-- 歌詞 / Lyrics text -->
        <div id="lyrics">
        <!-- 文字 / Text -->
        <div id="text"></div>
        <!-- ビートバー / Beat bar -->
        <!--<div id="bar"></div>-->
        </div>

        <!-- シークバー -->
        <div id="seekbar">
        <div></div>
        </div>

        <img class="miku-image" id="miku-image" src="./images/visual_2023.png" alt="Hatsune Miku">
        
        <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
        <script src="https://unpkg.com/textalive-app-api/dist/index.js"></script>
        <script src="./script.js"></script>
        <script type="x-shader/x-vertex" id="vertexshader">

          varying vec2 vUv;
    
          void main() {
    
            vUv = uv;
    
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
    
          }
    
        </script>
    
        <script type="x-shader/x-fragment" id="fragmentshader">
    
          uniform sampler2D baseTexture;
          uniform sampler2D bloomTexture;
    
          varying vec2 vUv;
    
          void main() {
    
            gl_FragColor = ( texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) );
    
          }
    
        </script>
        <script type="module" src="./animation2.js"></script>
        <script src="./audio.js"></script>

    </body>
</html>